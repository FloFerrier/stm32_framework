# Filename: nucleo-f446re.resc

$CONFIG_FILE?=@config/nucleo-f446re.repl
$FIRMWARE_FILE?=@bin/stm32f446retx_Debug.elf

emulation CreateUartPtyTerminal "console" "/tmp/console"

mach create
machine LoadPlatformDescription $CONFIG_FILE

sysbus LoadELF $FIRMWARE_FILE

logLevel 0
machine StartGdbServer 3333
pause

connector Connect sysbus.usart2 console